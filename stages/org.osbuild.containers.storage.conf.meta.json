{
  "summary": "Edit containers-storage.conf(5) files.",
  "description": [
    "This stage can be used to create or modify `containers-storage.conf`",
    "configuration files. The default strategy is to merge the specified",
    "options with the existing options."
  ],
  "schema": {
    "definitions": {
      "storage": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 1,
        "properties": {
          "driver": {
            "description": "container storage driver.",
            "type": "string",
            "enum": [
              "overlay",
              "vfs",
              "devmapper",
              "aufs",
              "btrfs",
              "zfs"
            ]
          },
          "graphroot": {
            "description": "container storage graph directory.",
            "type": "string"
          },
          "runroot": {
            "description": "container storage run directory.",
            "type": "string"
          },
          "transient_store": {
            "description": "Make the container store not persist across reboot.",
            "type": "boolean"
          },
          "options": {
            "$ref": "#/definitions/storage-options"
          }
        }
      },
      "storage-options": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 1,
        "properties": {
          "additionalimagestores": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "pull_options": {
            "$ref": "#/definitions/storage-options-pulloptions"
          },
          "overlay": {
            "$ref": "#/definitions/storage-options-overlay"
          }
        }
      },
      "storage-options-pulloptions": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 1,
        "properties": {
          "enable_partial_images": {
            "type": "string",
            "enum": [
              "true",
              "false"
            ]
          },
          "use_hard_links": {
            "type": "string",
            "enum": [
              "true",
              "false"
            ]
          },
          "convert_images": {
            "type": "string",
            "enum": [
              "true",
              "false"
            ]
          }
        }
      },
      "storage-options-overlay": {
        "type": "object",
        "additionalProperties": false,
        "minProperties": 1,
        "properties": {
          "mountopt": {
            "type": "string"
          }
        }
      }
    },
    "additionalProperties": false,
    "required": [
      "config"
    ],
    "properties": {
      "filename": {
        "type": "string",
        "description": "location of the configuration file.",
        "default": "/etc/containers/storage.conf",
        "enum": [
          "/etc/containers/storage.conf",
          "/usr/share/containers/storage.conf"
        ]
      },
      "filebase": {
        "type": "string",
        "description": "Read the base configuration from this file."
      },
      "comment": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "config": {
        "additionalProperties": false,
        "type": "object",
        "description": "storage configuration",
        "minProperties": 1,
        "properties": {
          "storage": {
            "$ref": "#/definitions/storage"
          }
        }
      }
    }
  }
}
