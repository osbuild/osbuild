{
    "summary": "Change DNF configuration.",
    "description": [
        "The stage changes persistent DNF configuration on the filesystem.",
        "Allows defining dnf variables via the `variables` option and",
        "specific configuration options via the `config` option. The",
        "latter will be saved in `/etc/dnf/dnf.conf`. See `dnf.conf(5)`",
        "for details about the configuration options."
    ],
    "schema": {
        "definitions": {
            "variable": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "name",
                    "value"
                ],
                "description": "DNF variable to configure persistently.",
                "properties": {
                    "name": {
                        "type": "string",
                        "pattern": "^[a-z0-9_]+$",
                        "description": "Name of the variable."
                    },
                    "value": {
                        "type": "string",
                        "description": "Value of the variable."
                    }
                }
            },
            "config_main": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "ip_resolve": {
                        "type": "string",
                        "enum": [
                            "4",
                            "IPv4",
                            "6",
                            "IPv6"
                        ],
                        "description": "Determines how DNF resolves host names."
                    },
                    "tsflags": {
                        "type": "array",
                        "description": "Extra flags for the RPM transaction.",
                        "minItems": 1,
                        "uniqueItems": true,
                        "items": {
                            "type": "string",
                            "enum": [
                                "noscripts",
                                "test",
                                "notriggers",
                                "nodocs",
                                "justdb",
                                "nocontexts",
                                "nocaps",
                                "nocrypto"
                            ]
                        }
                    }
                }
            }
        },
        "additionalProperties": false,
        "description": "DNF configuration.",
        "properties": {
            "variables": {
                "type": "array",
                "description": "DNF variables to configure persistently.",
                "items": {
                    "$ref": "#/definitions/variable"
                }
            },
            "config": {
                "additionalProperties": false,
                "type": "object",
                "description": "DNF global configuration.",
                "properties": {
                    "main": {
                        "$ref": "#/definitions/config_main"
                    }
                }
            }
        }
    }
}
