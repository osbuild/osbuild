#!/usr/libexec/platform-python

import subprocess
import sys

from osbuild import api
from osbuild.util import runners

if __name__ == "__main__":
    with api.exception_handler():
        runners.ldconfig()
        runners.sysusers()
        runners.tmpfiles()
        runners.nsswitch()
        runners.python_alternatives()

        env = runners.quirks()

        r = subprocess.run(sys.argv[1:], env=env, check=False)

        sys.exit(r.returncode)
